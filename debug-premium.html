<!DOCTYPE html>
<html>
<head>
    <title>Debug Premium Loading</title>
</head>
<body>
    <h1>Debug Premium Loading Issue</h1>
    
    <div>
        <h3>Test Scenarios:</h3>
        <button onclick="clearAllStorage()">1. Clear All Storage (New User)</button><br><br>
        <button onclick="setFreeUser()">2. Set Free User</button><br><br>
        <button onclick="setPremiumUser()">3. Set Premium User (Cached)</button><br><br>
        <button onclick="setPremiumEmailOnly()">4. Set Premium Email Only (Triggers Server Check)</button><br><br>
        <button onclick="showStorage()">Show Current Storage</button><br><br>
    </div>
    
    <div id="storage-display" style="background: #f0f0f0; padding: 10px; margin: 10px 0;"></div>
    
    <div>
        <a href="http://localhost:3000" target="_blank">Open Main App</a>
    </div>
    
    <script>
        function clearAllStorage() {
            localStorage.clear();
            console.log('All storage cleared');
            showStorage();
        }
        
        function setFreeUser() {
            localStorage.clear();
            localStorage.setItem('userIdentifier', 'user_test_free_123');
            localStorage.setItem('isPremium', 'false');
            console.log('Set as free user');
            showStorage();
        }
        
        function setPremiumUser() {
            localStorage.clear();
            localStorage.setItem('userIdentifier', 'user_test_premium_123');
            localStorage.setItem('premiumEmail', 'benoit.mailhot999@gmail.com');
            localStorage.setItem('isPremium', 'true');
            console.log('Set as cached premium user');
            showStorage();
        }
        
        function setPremiumEmailOnly() {
            localStorage.clear();
            localStorage.setItem('userIdentifier', 'user_test_checking_123');
            localStorage.setItem('premiumEmail', 'benoit.mailhot999@gmail.com');
            // Don't set isPremium - this should trigger server check
            console.log('Set premium email only - should trigger server check');
            showStorage();
        }
        
        function showStorage() {
            const display = document.getElementById('storage-display');
            const storage = {
                userIdentifier: localStorage.getItem('userIdentifier'),
                premiumEmail: localStorage.getItem('premiumEmail'),
                isPremium: localStorage.getItem('isPremium')
            };
            
            display.innerHTML = '<h4>Current localStorage:</h4><pre>' + JSON.stringify(storage, null, 2) + '</pre>';
        }
        
        showStorage();
    </script>
</body>
</html>